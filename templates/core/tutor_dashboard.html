{% extends "base.html" %}
{% block content %}
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">講師ダッシュボード</h2>
      {% if tutor.is_online %}
        <span class="badge badge-green">オンライン</span>
      {% else %}
        <span class="badge badge-gray">オフライン</span>
      {% endif %}
    </div>

    <p class="card-subtitle">
      オンラインにすると、5分レッスンのマッチング対象になります。
    </p>

    <form method="post" class="mt-16">
      {% csrf_token %}
      {% if tutor.is_online %}
        <button type="submit" name="action" value="go_offline" class="btn btn-secondary">
          オフラインにする
        </button>
      {% else %}
        <button type="submit" name="action" value="go_online" class="btn">
          オンラインにする
        </button>
      {% endif %}
    </form>
  </div>

  <div class="card">
    <div class="card-header">
      <h3 class="card-title">最近担当したレッスン</h3>
    </div>
    <ul class="list">
      {% for m in matches %}
        <li>
          <strong>{{ m.started_at }}</strong>
          <span class="text-muted">〜 {{ m.end_at }}</span><br>
          生徒: {{ m.student_name }}
          <span class="badge badge-gray">{{ m.request.language.name }}</span>
        </li>
      {% empty %}
        <li class="text-muted">まだレッスンはありません。</li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}
